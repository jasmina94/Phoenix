<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</head>
<body>
	<h2>File Upload Example</h2>
	<form action="rest/topics/upload" method="post"
		enctype="multipart/form-data">
		<p>
			Odaberi sliku : <input type="file" name="image" accept="image/*" id="imageInput"/>
		</p>
		<p><img src=""  name = "previewImage" id = "previewImage" width="100" height="100"></p>
		<button type="button" id="dodajSlikuBtn">Dodaj</button>
	</form>
	
	
<script type="text/javascript">

$(document).ready(function(){
	
	$("#dodajSlikuBtn").click(function() {
		var src = "../PhoenixBase/images/topics/" + $("#imageInput")[0].files[0].name;
		var data = new FormData();
		data.append('file', $("#imageInput")[0].files[0]);
		
		$.ajax({
			url: 'rest/image/uploadTopicImage',
			data: data,
			cache: false,
			contentType: false,
			processData: false,
			type: "POST",
			success: function(data){
				if(data != ""){
					console.log(data);
					var src1 = "../PhoenixBase/images/topics/" + data;
					$('#previewImage').attr("src",src1);
			    	alert("Slika je dodata");
				}		    	
		    },
		    error : function(XMLHttpRequest, textStatus, errorThrown) {
		    	alert("AJAX ERROR: " + errorThrown);
			}
		});
	});
});


</script>
</body>
</html>